services:
  xiaohongshu-mcp:
    # Docker Hub 镜像（默认）
    image: xpzouying/xiaohongshu-mcp
    # 阿里云镜像源（国内用户推荐，拉取更快）
    # image: crpi-hocnvtkomt7w9v8t.cn-beijing.personal.cr.aliyuncs.com/xpzouying/xiaohongshu-mcp
    container_name: xiaohongshu-mcp
    restart: unless-stopped
    init: true
    tty: true
    # 使用宿主机网络模式，绕过 Docker 网络层的代理劫持
    network_mode: host
    volumes:
      - ./data:/app/data
      - ./images:/app/images
    environment:
      - ROD_BROWSER_BIN=/usr/bin/google-chrome
      - COOKIES_PATH=/app/data/cookies.json
    # 注意：network_mode: host 时 ports 映射不需要，服务直接监听宿主机端口