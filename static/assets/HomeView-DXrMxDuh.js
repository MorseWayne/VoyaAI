import{o as _,a as r,c as d,b as t,u as x,d as C,t as l,e as m,F as j,r as D,f,g as $}from"./index-D_7vER7L.js";import{f as E}from"./plans-CLKlAiT6.js";const S={class:"max-w-7xl mx-auto"},V={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},B={class:"space-y-6 animate-fade-in",style:{"animation-delay":"0.1s"}},N={class:"grid grid-cols-2 gap-4"},P={class:"glass-panel p-6 rounded-2xl"},z={class:"flex items-center justify-between"},F={class:"text-3xl font-bold t-heading"},L={class:"text-3xl font-bold t-heading"},A={class:"lg:col-span-2 animate-fade-in",style:{"animation-delay":"0.2s"}},H={class:"glass-panel rounded-2xl p-6 h-full min-h-[500px] flex flex-col"},I={class:"flex justify-between items-center mb-6"},M={class:"space-y-4 flex-1 overflow-y-auto pr-2"},R={key:0,class:"text-center py-20 t-text-muted"},T={key:1,class:"text-center py-12 t-text-muted"},q=["onClick"],G={class:"flex items-center gap-4 min-w-0"},J={class:"w-10 h-10 rounded-lg flex items-center justify-center text-cyan-500 font-bold text-sm",style:{background:"var(--bg-elevated)",border:"1px solid var(--border-color)"}},K={class:"min-w-0"},O={class:"font-bold t-text truncate group-hover:text-cyan-500 transition"},Q={class:"text-xs t-text-muted flex items-center gap-2"},Y={__name:"HomeView",setup(U){const o=$(),p=f([]),v=f(0),g=f(0),y=f(!0);_(async()=>{try{const a=await E();v.value=a.length;const s=new Set;a.forEach(e=>{var i,c;(i=e.start_location)!=null&&i.city&&s.add(e.start_location.city),(c=e.days)==null||c.forEach(n=>{var b;n.city&&s.add(n.city),(b=n.segments)==null||b.forEach(u=>{var h,w;(h=u.origin)!=null&&h.city&&s.add(u.origin.city),(w=u.destination)!=null&&w.city&&s.add(u.destination.city)})})}),g.value=s.size,p.value=a.slice(0,10)}catch(a){console.error("Dashboard load error:",a)}finally{y.value=!1}});function k(a){o.push({name:"plan-detail",params:{id:a}})}return(a,s)=>(r(),d("div",S,[s[18]||(s[18]=t("div",{class:"mb-8 animate-fade-in"},[t("h1",{class:"text-3xl font-bold t-heading mb-2"},"欢迎回来，旅行者"),t("p",{class:"t-text-sub"},"准备好开启下一段旅程了吗？")],-1)),t("div",V,[t("div",B,[t("div",{onClick:s[0]||(s[0]=e=>x(o).push({name:"create-plan"})),class:"glass-panel p-6 rounded-2xl cursor-pointer transition group relative overflow-hidden"},[...s[4]||(s[4]=[C('<div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition"><i class="fas fa-map-marked-alt text-8xl text-cyan-400"></i></div><div class="relative z-10"><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-white mb-4 shadow-lg shadow-cyan-500/30"><i class="fas fa-plus text-xl"></i></div><h3 class="text-xl font-bold t-heading mb-1">创建新行程</h3><p class="t-text-sub text-sm mb-4">智能规划路线，一键生成攻略</p><span class="text-cyan-500 text-sm font-medium flex items-center gap-2 group-hover:gap-3 transition-all"> 立即开始 <i class="fas fa-arrow-right"></i></span></div>',2)])]),t("div",N,[t("div",{onClick:s[1]||(s[1]=e=>x(o).push({name:"planner"})),class:"glass-panel p-4 rounded-2xl cursor-pointer transition text-center group"},[...s[5]||(s[5]=[t("i",{class:"fas fa-route text-2xl text-emerald-400 mb-2 group-hover:scale-110 transition-transform"},null,-1),t("div",{class:"font-medium t-text"},"路线优化",-1)])]),t("div",{onClick:s[2]||(s[2]=e=>x(o).push({name:"chat"})),class:"glass-panel p-4 rounded-2xl cursor-pointer transition text-center group"},[...s[6]||(s[6]=[t("i",{class:"fas fa-robot text-2xl text-violet-400 mb-2 group-hover:scale-110 transition-transform"},null,-1),t("div",{class:"font-medium t-text"},"AI 助手",-1)])])]),t("div",P,[s[10]||(s[10]=t("h4",{class:"text-sm font-bold t-text-muted uppercase tracking-wider mb-4"},"旅行足迹",-1)),t("div",z,[t("div",null,[t("div",F,l(v.value),1),s[7]||(s[7]=t("div",{class:"text-xs t-text-muted"},"行程总数",-1))]),s[9]||(s[9]=t("div",{class:"h-8 w-px",style:{background:"var(--border-color)"}},null,-1)),t("div",null,[t("div",L,l(g.value),1),s[8]||(s[8]=t("div",{class:"text-xs t-text-muted"},"打卡城市",-1))])])])]),t("div",A,[t("div",H,[t("div",I,[s[12]||(s[12]=t("h3",{class:"text-xl font-bold t-heading flex items-center gap-2"},[t("i",{class:"far fa-clock text-cyan-500"}),m(" 最近行程 ")],-1)),t("button",{onClick:s[3]||(s[3]=e=>x(o).push({name:"plans"})),class:"text-sm t-text-sub hover:text-cyan-500 transition"},[...s[11]||(s[11]=[m(" 查看全部 ",-1),t("i",{class:"fas fa-chevron-right text-xs ml-1"},null,-1)])])]),t("div",M,[y.value?(r(),d("div",R,[...s[13]||(s[13]=[t("i",{class:"fas fa-spinner fa-spin text-2xl mb-3"},null,-1),t("p",null,"加载中...",-1)])])):p.value.length===0?(r(),d("div",T,[...s[14]||(s[14]=[t("i",{class:"fas fa-wind text-3xl mb-3 opacity-50"},null,-1),t("p",null,"暂无行程，快去创建吧！",-1)])])):(r(!0),d(j,{key:2},D(p.value,e=>(r(),d("div",{key:e.id,onClick:i=>k(e.id),class:"rounded-xl p-4 cursor-pointer transition flex items-center justify-between group",style:{background:"var(--bg-card)",border:"1px solid var(--border-color)"}},[t("div",G,[t("div",J,l((e.days||[]).length)+"天 ",1),t("div",K,[t("h4",O,l(e.title||"未命名行程"),1),t("div",Q,[t("span",null,[s[15]||(s[15]=t("i",{class:"far fa-calendar-alt mr-1"},null,-1)),m(" "+l(new Date(e.created_at||Date.now()).toLocaleDateString()),1)]),s[16]||(s[16]=t("span",null,"•",-1)),t("span",null,l((e.days||[]).reduce((i,c)=>{var n;return i+(((n=c.segments)==null?void 0:n.length)||0)},0))+" 个地点",1)])])]),s[17]||(s[17]=t("div",{class:"t-text-muted group-hover:text-cyan-500 transition"},[t("i",{class:"fas fa-chevron-right"})],-1))],8,q))),128))])])])])]))}};export{Y as default};
