import{g as m,a as l,c as d,b as t,l as x,t as p,e as i,o as g,u as v,F as y,r as h,f,k}from"./index-Dt4hLyz-.js";import{f as w,d as D}from"./plans-CWatqful.js";import"./client-Be4OVhjz.js";const P={class:"rounded-xl shadow-md hover:shadow-lg transition p-6 border-t-4 border-cyan-500 relative group",style:{background:"var(--bg-card)","border-left":"1px solid var(--border-color)","border-right":"1px solid var(--border-color)","border-bottom":"1px solid var(--border-color)"}},$=["title"],C={class:"text-sm t-text-sub mb-4 space-y-1"},B={__name:"PlanCard",props:{plan:{type:Object,required:!0}},emits:["delete"],setup(a,{emit:c}){const s=a,r=c,o=m();function b(){o.push({name:"plan-detail",params:{id:s.plan.id}})}return(n,e)=>(l(),d("div",P,[t("button",{onClick:e[0]||(e[0]=x(u=>r("delete",a.plan.id),["stop"])),class:"absolute top-4 right-4 t-text-muted hover:text-red-400 opacity-0 group-hover:opacity-100 transition"},[...e[1]||(e[1]=[t("i",{class:"fas fa-trash-alt"},null,-1)])]),t("h3",{class:"font-bold text-xl mb-2 t-heading truncate",title:a.plan.title||"未命名行程"},p(a.plan.title||"未命名行程"),9,$),t("div",C,[t("p",null,[e[2]||(e[2]=t("i",{class:"far fa-calendar-alt w-5 text-cyan-500"},null,-1)),i(" "+p(new Date(a.plan.created_at||Date.now()).toLocaleDateString()),1)]),t("p",null,[e[3]||(e[3]=t("i",{class:"fas fa-map-marker-alt w-5 text-cyan-500"},null,-1)),i(" "+p(a.plan.days?a.plan.days.length:0)+" 天行程",1)])]),t("button",{onClick:b,class:"w-full mt-2 t-text-sub hover:bg-cyan-600 hover:text-white font-medium py-2 rounded-lg transition",style:{background:"var(--bg-elevated)",border:"1px solid var(--border-color)"}}," 查看详情 ")]))}},V={class:"max-w-7xl mx-auto"},j={class:"flex justify-between items-end mb-8 animate-fade-in"},E={class:"flex gap-3"},F={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in",style:{"animation-delay":"0.1s"}},L={key:0,class:"col-span-full text-center py-20 t-text-muted rounded-2xl border-2 border-dashed",style:{background:"var(--bg-surface)","border-color":"var(--border-color)"}},M={key:1,class:"col-span-full text-center py-12 rounded-xl border-dashed border-2",style:{background:"var(--bg-surface)","border-color":"var(--border-color)"}},O={__name:"PlansView",setup(a){const c=m(),s=f([]),r=f(!0);async function o(){r.value=!0;try{s.value=await w()}catch(n){console.error("Error loading plans:",n)}finally{r.value=!1}}async function b(n){if(confirm("确定要删除这个行程吗？"))try{await D(n),o()}catch{alert("删除失败")}}return g(o),(n,e)=>(l(),d("div",V,[t("div",j,[e[3]||(e[3]=t("div",null,[t("h2",{class:"text-3xl font-bold t-heading flex items-center gap-3"},[t("i",{class:"fas fa-bookmark text-cyan-500"}),i(" 我的行程列表 ")]),t("p",{class:"t-text-sub mt-2"},"管理和查看您保存的所有旅行计划")],-1)),t("div",E,[t("button",{onClick:e[0]||(e[0]=u=>v(c).push({name:"create-plan"})),class:"px-4 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg hover:shadow-lg hover:scale-105 transition-all flex items-center gap-2 font-medium"},[...e[1]||(e[1]=[t("i",{class:"fas fa-plus"},null,-1),i(" 新建行程 ",-1)])]),t("button",{onClick:o,class:"px-4 py-2 rounded-lg transition-all shadow-sm flex items-center gap-2 t-text-sub",style:{background:"var(--bg-card)",border:"1px solid var(--border-color)"}},[...e[2]||(e[2]=[t("i",{class:"fas fa-sync-alt"},null,-1),i(" 刷新列表 ",-1)])])])]),t("div",F,[r.value?(l(),d("div",L,[...e[4]||(e[4]=[t("i",{class:"fas fa-spinner fa-spin text-4xl mb-4 text-cyan-500"},null,-1),t("p",null,"正在加载您的精彩行程...",-1)])])):s.value.length===0?(l(),d("div",M,[...e[5]||(e[5]=[t("i",{class:"fas fa-inbox text-4xl t-text-muted mb-4"},null,-1),t("p",{class:"t-text-sub"},"暂无保存的行程",-1)])])):(l(!0),d(y,{key:2},h(s.value,u=>(l(),k(B,{key:u.id,plan:u,onDelete:b},null,8,["plan"]))),128))])]))}};export{O as default};
