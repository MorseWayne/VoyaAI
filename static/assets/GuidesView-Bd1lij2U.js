import{o as w,a as r,c as l,b as t,e as p,F as k,r as _,w as C,v as M,h as b,t as c,f as d,g as j}from"./index-0Jbrg61l.js";import{l as B,i as G,d as V}from"./guides-DndHWiLI.js";import"./client-C1hk53qU.js";const D={class:"min-h-screen pt-20 pb-20 px-4",style:{background:"var(--bg-page)"}},I={class:"container mx-auto max-w-6xl"},A={class:"flex justify-between items-center mb-8"},L={key:0,class:"text-center py-12"},N={key:1,class:"text-center py-12 rounded-xl border-2 border-dashed",style:{"border-color":"var(--border-color)"}},T={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},$=["onClick"],z={class:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity"},F=["onClick"],H={class:"text-xl font-bold mb-2 line-clamp-1",style:{color:"var(--text-heading)"}},S={class:"text-sm mb-4 line-clamp-2",style:{color:"var(--text-secondary)"}},E={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0,0,0,0.5)"}},P={class:"rounded-xl shadow-2xl w-full max-w-2xl p-6 overflow-hidden",style:{background:"var(--bg-card)"}},R=["disabled"],U={key:0,class:"mt-2 flex items-center gap-2 text-sm",style:{color:"var(--text-secondary)"}},q={class:"flex justify-end gap-3 mt-4"},J=["disabled"],K=["disabled"],Y={__name:"GuidesView",setup(O){const g=j(),u=d([]),v=d(!1),i=d(!1),n=d(""),a=d(!1),m=async()=>{v.value=!0;try{u.value=await B()}catch(s){console.error(s)}finally{v.value=!1}},y=async()=>{var e;const s=(e=n.value)==null?void 0:e.trim();if(s){a.value=!0;try{await G(s),i.value=!1,n.value="",await m()}catch(o){alert("å¯¼å…¥å¤±è´¥: "+o.message)}finally{a.value=!1}}},f=async(s,e)=>{if(e.stopPropagation(),!!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ”»ç•¥å—ï¼Ÿ"))try{await V(s),await m()}catch(o){console.error(o)}},h=s=>{g.push({name:"guide-detail",params:{id:s}})};return w(m),(s,e)=>(r(),l("div",D,[t("div",I,[t("div",A,[e[4]||(e[4]=t("h1",{class:"text-3xl font-bold",style:{color:"var(--text-heading)"}},"æ”»ç•¥åˆé›†",-1)),t("button",{onClick:e[0]||(e[0]=o=>i.value=!0),class:"px-4 py-2 rounded-lg font-medium text-white transition-colors flex items-center gap-2 shadow-lg hover:shadow-xl",style:{background:"linear-gradient(135deg, var(--logo-text-from), var(--logo-text-to))"}},[...e[3]||(e[3]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),p(" å¯¼å…¥æ”»ç•¥ ",-1)])])]),v.value?(r(),l("div",L,[...e[5]||(e[5]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto"},null,-1),t("p",{class:"mt-4 text-gray-500"},"åŠ è½½ä¸­...",-1)])])):u.value.length===0?(r(),l("div",N,[...e[6]||(e[6]=[t("p",{class:"text-lg mb-4",style:{color:"var(--text-secondary)"}},"æš‚æ— æ”»ç•¥ï¼Œç²˜è´´æ–‡æœ¬æˆ– Markdown å³å¯å¯¼å…¥",-1)])])):(r(),l("div",T,[(r(!0),l(k,null,_(u.value,o=>(r(),l("div",{key:o.id,onClick:x=>h(o.id),class:"group relative rounded-xl p-6 shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer border border-transparent hover:border-cyan-500/30",style:{background:"var(--bg-card)"}},[t("div",z,[t("button",{onClick:x=>f(o.id,x),class:"p-2 text-red-500 hover:bg-red-50 rounded-full"},[...e[7]||(e[7]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,F)]),e[8]||(e[8]=t("div",{class:"h-40 mb-4 rounded-lg bg-gradient-to-br from-blue-50 to-cyan-50 flex items-center justify-center"},[t("span",{class:"text-6xl"},"ğŸ—ºï¸")],-1)),t("h3",H,c(o.title),1),t("p",S,c(o.sections.length)+" ä¸ªç« èŠ‚ Â· åˆ›å»ºäº "+c(new Date(o.created_at).toLocaleDateString()),1),e[9]||(e[9]=t("div",{class:"flex items-center text-sm font-medium",style:{color:"var(--nav-active-text)"}},[p(" æŸ¥çœ‹è¯¦æƒ… "),t("svg",{class:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))],8,$))),128))]))]),i.value?(r(),l("div",E,[t("div",P,[e[11]||(e[11]=t("h2",{class:"text-xl font-bold mb-2",style:{color:"var(--text-heading)"}},"å¯¼å…¥æ”»ç•¥",-1)),e[12]||(e[12]=t("p",{class:"text-sm mb-4",style:{color:"var(--text-secondary)"}},"ç²˜è´´ä»»æ„æ ¼å¼çš„æ”»ç•¥æ–‡æœ¬ï¼ŒAI å°†è‡ªåŠ¨è§£æä¸ºç»“æ„åŒ–å†…å®¹",-1)),C(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.value=o),disabled:a.value,class:"w-full h-64 p-4 rounded-lg border focus:ring-2 focus:ring-cyan-500 outline-none resize-none font-mono text-sm disabled:opacity-70 disabled:cursor-not-allowed",style:{background:"var(--bg-input)","border-color":"var(--border-color)",color:"var(--text-primary)"},placeholder:`æ”¯æŒçº¯æ–‡æœ¬ã€Markdown æˆ–ä»»æ„æ ¼å¼çš„æ”»ç•¥ç¬”è®°

ä¾‹å¦‚ï¼š
æ·±åœ³åˆ°é¦™æ¸¯ä¸€æ—¥æ¸¸æ”»ç•¥
æ—©ä¸Šä»ç¦ç”°å£å²¸è¿‡å…³...
äº¤é€šï¼šåœ°é“ä¸œé“çº¿...
è´¹ç”¨ï¼š...`},null,8,R),[[M,n.value]]),a.value?(r(),l("div",U,[...e[10]||(e[10]=[t("span",{class:"inline-block w-4 h-4 border-2 border-cyan-500 border-t-transparent rounded-full animate-spin"},null,-1),p(" AI è§£æä¸­ï¼Œè¯·ç¨å€™... ",-1)])])):b("",!0),t("div",q,[t("button",{onClick:e[2]||(e[2]=o=>i.value=!1),disabled:a.value,class:"px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50",style:{color:"var(--text-secondary)",background:"var(--bg-inset)"}}," å–æ¶ˆ ",8,J),t("button",{onClick:y,disabled:a.value||!n.value.trim(),class:"px-4 py-2 rounded-lg font-medium text-white transition-colors shadow-md disabled:opacity-50 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, var(--logo-text-from), var(--logo-text-to))"}},c(a.value?"è§£æä¸­...":"ç¡®è®¤å¯¼å…¥"),9,K)])])])):b("",!0)]))}};export{Y as default};
