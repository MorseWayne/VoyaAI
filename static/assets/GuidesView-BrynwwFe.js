import{o as h,a as r,c as a,b as e,e as g,F as w,r as k,w as _,v as C,t as c,h as M,f as n,g as j}from"./index-CxELTe30.js";import{l as B,i as G,d as V}from"./guides-Bg3Sh5my.js";import"./client-Be4OVhjz.js";const D={class:"min-h-screen pt-20 pb-20 px-4",style:{background:"var(--bg-page)"}},L={class:"container mx-auto max-w-6xl"},N={class:"flex justify-between items-center mb-8"},T={key:0,class:"text-center py-12"},$={key:1,class:"text-center py-12 rounded-xl border-2 border-dashed",style:{"border-color":"var(--border-color)"}},z={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},F=["onClick"],H={class:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity"},I=["onClick"],S={class:"text-xl font-bold mb-2 line-clamp-1",style:{color:"var(--text-heading)"}},A={class:"text-sm mb-4 line-clamp-2",style:{color:"var(--text-secondary)"}},E={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{background:"rgba(0,0,0,0.5)"}},P={class:"bg-white rounded-xl shadow-2xl w-full max-w-2xl p-6",style:{background:"var(--bg-card)"}},R={class:"flex justify-end gap-3"},U=["disabled"],Q={__name:"GuidesView",setup(q){const x=j(),u=n([]),v=n(!1),i=n(!1),l=n(""),d=n(!1),m=async()=>{v.value=!0;try{u.value=await B()}catch(s){console.error(s)}finally{v.value=!1}},b=async()=>{if(l.value){d.value=!0;try{await G(l.value),i.value=!1,l.value="",await m()}catch(s){alert("å¯¼å…¥å¤±è´¥: "+s.message)}finally{d.value=!1}}},f=async(s,t)=>{if(t.stopPropagation(),!!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ”»ç•¥å—ï¼Ÿ"))try{await V(s),await m()}catch(o){console.error(o)}},y=s=>{x.push({name:"guide-detail",params:{id:s}})};return h(m),(s,t)=>(r(),a("div",D,[e("div",L,[e("div",N,[t[4]||(t[4]=e("h1",{class:"text-3xl font-bold",style:{color:"var(--text-heading)"}},"æ”»ç•¥åˆé›†",-1)),e("button",{onClick:t[0]||(t[0]=o=>i.value=!0),class:"px-4 py-2 rounded-lg font-medium text-white transition-colors flex items-center gap-2 shadow-lg hover:shadow-xl",style:{background:"linear-gradient(135deg, var(--logo-text-from), var(--logo-text-to))"}},[...t[3]||(t[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),g(" å¯¼å…¥æ”»ç•¥ ",-1)])])]),v.value?(r(),a("div",T,[...t[5]||(t[5]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-500 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-500"},"åŠ è½½ä¸­...",-1)])])):u.value.length===0?(r(),a("div",$,[...t[6]||(t[6]=[e("p",{class:"text-lg mb-4",style:{color:"var(--text-secondary)"}},"æš‚æ— æ”»ç•¥ï¼Œè¯·å¯¼å…¥ Markdown ç¬”è®°",-1)])])):(r(),a("div",z,[(r(!0),a(w,null,k(u.value,o=>(r(),a("div",{key:o.id,onClick:p=>y(o.id),class:"group relative rounded-xl p-6 shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer border border-transparent hover:border-cyan-500/30",style:{background:"var(--bg-card)"}},[e("div",H,[e("button",{onClick:p=>f(o.id,p),class:"p-2 text-red-500 hover:bg-red-50 rounded-full"},[...t[7]||(t[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,I)]),t[8]||(t[8]=e("div",{class:"h-40 mb-4 rounded-lg bg-gradient-to-br from-blue-50 to-cyan-50 flex items-center justify-center"},[e("span",{class:"text-6xl"},"ğŸ—ºï¸")],-1)),e("h3",S,c(o.title),1),e("p",A,c(o.sections.length)+" ä¸ªç« èŠ‚ Â· åˆ›å»ºäº "+c(new Date(o.created_at).toLocaleDateString()),1),t[9]||(t[9]=e("div",{class:"flex items-center text-sm font-medium",style:{color:"var(--nav-active-text)"}},[g(" æŸ¥çœ‹è¯¦æƒ… "),e("svg",{class:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))],8,F))),128))]))]),i.value?(r(),a("div",E,[e("div",P,[t[10]||(t[10]=e("h2",{class:"text-xl font-bold mb-4",style:{color:"var(--text-heading)"}},"å¯¼å…¥ Markdown æ”»ç•¥",-1)),_(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>l.value=o),class:"w-full h-64 p-4 rounded-lg border mb-4 focus:ring-2 focus:ring-cyan-500 outline-none resize-none font-mono text-sm",style:{background:"var(--bg-input)","border-color":"var(--border-color)",color:"var(--text-primary)"},placeholder:`# æ ‡é¢˜
## ç« èŠ‚...
å†…å®¹...`},null,512),[[C,l.value]]),e("div",R,[e("button",{onClick:t[2]||(t[2]=o=>i.value=!1),class:"px-4 py-2 rounded-lg font-medium transition-colors",style:{color:"var(--text-secondary)",background:"var(--bg-inset)"}}," å–æ¶ˆ "),e("button",{onClick:b,disabled:d.value||!l.value,class:"px-4 py-2 rounded-lg font-medium text-white transition-colors shadow-md disabled:opacity-50 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, var(--logo-text-from), var(--logo-text-to))"}},c(d.value?"å¯¼å…¥ä¸­...":"ç¡®è®¤å¯¼å…¥"),9,U)])])])):M("",!0)]))}};export{Q as default};
