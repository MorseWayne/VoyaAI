import{a as r,c as m,b as t,t as n,u as P,e as $,F,r as U,h as z,i as B,w as k,v as S,j as V,n as C,k as N,f as c,g as R}from"./index-CE2TRtVX.js";import{u as M,o as O}from"./plan-DHp9igay.js";import{s as q}from"./plans-CLKlAiT6.js";const E={class:"w-full p-6 rounded-xl shadow-sm",style:{background:"var(--bg-card)",border:"1px solid var(--border-color)"}},I={class:"text-xl font-bold t-heading mb-4 flex justify-between items-center"},L={class:"flex items-center gap-2"},A={class:"text-sm font-normal t-text-sub px-3 py-1 rounded-full",style:{background:"var(--bg-elevated)",border:"1px solid var(--border-color)"}},G={class:"relative ml-4 pl-8 space-y-8",style:{"border-left":"4px solid var(--border-color)"}},H={class:"absolute -left-[42px] text-cyan-500 w-8 h-8 rounded-full flex items-center justify-center font-bold shadow-md",style:{background:"var(--bg-elevated)",border:"2px solid var(--border-color)"}},J={class:"p-4 rounded-lg transition",style:{background:"var(--bg-elevated)",border:"1px solid var(--border-color)"}},K={class:"font-bold text-lg t-text"},Q={class:"text-sm t-text-muted mt-1"},W={key:0,class:"mt-4 mb-2 text-sm t-text-sub pl-2 flex items-center gap-2"},X={class:"text-xs t-text-sub px-2 py-0.5 rounded",style:{background:"var(--bg-inset)",border:"1px solid var(--border-color)"}},Y={__name:"RouteResults",props:{data:{type:Object,required:!0}},emits:["save"],setup(i,{emit:h}){const x=i,_=h,p=parseFloat(x.data.total_duration_hours)*60,v=x.data.total_distance_km;return(b,s)=>(r(),m("div",E,[t("h3",I,[s[2]||(s[2]=t("span",null,"è§„åˆ’ç»“æœ",-1)),t("div",L,[t("span",A," æ€»ç¨‹: "+n(P(v))+"km / çº¦ "+n(Math.round(p))+"åˆ†é’Ÿ ",1),t("button",{onClick:s[0]||(s[0]=o=>_("save")),class:"text-sm bg-primary text-white px-3 py-2 rounded-lg hover:bg-cyan-600 transition flex items-center shadow-sm"},[...s[1]||(s[1]=[t("i",{class:"fas fa-plus mr-1"},null,-1),$(" ä¿å­˜è¡Œç¨‹ ",-1)])])])]),t("div",G,[(r(!0),m(F,null,U(i.data.poi_details,(o,a)=>(r(),m("div",{key:a,class:"relative"},[t("div",H,n(a+1),1),t("div",J,[t("h4",K,n(o.name),1),t("p",Q,[s[3]||(s[3]=t("i",{class:"fas fa-map-marker-alt mr-1"},null,-1)),$(" "+n(o.address||"åœ°å€æœªçŸ¥"),1)])]),a<i.data.poi_details.length-1&&i.data.segments[a]?(r(),m("div",W,[s[4]||(s[4]=t("i",{class:"fas fa-arrow-down text-cyan-500"},null,-1)),t("span",null,"çº¦ "+n(i.data.segments[a].duration_m)+"åˆ†é’Ÿ",1),s[5]||(s[5]=t("span",{class:"t-text-muted"},"|",-1)),t("span",null,n(i.data.segments[a].distance_km)+"km",1),s[6]||(s[6]=t("span",{class:"t-text-muted"},"|",-1)),t("span",X,n(i.data.segments[a].mode),1)])):z("",!0)]))),128))])]))}},Z={class:"max-w-6xl mx-auto"},tt={class:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start"},et={class:"lg:col-span-4 glass-panel rounded-2xl shadow-xl p-6 md:p-8 animate-fade-in",style:{"animation-delay":"0.1s"}},st={class:"space-y-6"},lt={class:"relative group"},at={class:"relative"},ot={class:"relative group"},nt={class:"relative"},rt={class:"grid grid-cols-2 gap-4"},it={class:"relative"},dt={class:"relative"},ut=["disabled"],mt={class:"group-hover:tracking-wider transition-all duration-300"},ct={class:"lg:col-span-8 glass-panel rounded-2xl shadow-xl p-6 md:p-8 min-h-[500px] flex flex-col animate-fade-in relative overflow-hidden",style:{"animation-delay":"0.2s"}},pt={key:0,class:"flex-grow flex flex-col justify-center items-center text-center"},xt={key:1,class:"flex-grow flex flex-col justify-center items-center text-center text-red-500"},vt={class:"mt-2"},ft={key:3,class:"flex-grow flex flex-col justify-center items-center t-text-muted text-center p-8"},wt={__name:"PlannerView",setup(i){const h=R(),x=B(),_=M(),p=c(""),v=c(""),b=c("driving"),s=c("time"),o=c(!1),a=c(""),d=c(null);async function T(){const u=v.value.split(`
`).map(e=>e.trim()).filter(e=>e);if(u.length<2){alert("è¯·è‡³å°‘è¾“å…¥ä¸¤ä¸ªåœ°ç‚¹");return}o.value=!0,a.value="",d.value=null;try{const e=await O(u,p.value.trim(),b.value,s.value);_.currentPlanData=e,d.value=e}catch(e){a.value=e.message}finally{o.value=!1}}async function D(){if(!d.value)return;const u=p.value.trim()||"æœªçŸ¥åŸå¸‚",e={title:`${u}ç²¾å½©æ¸¸ç©è·¯çº¿`,days:[{day_index:1,city:u,segments:d.value.segments.map((l,j)=>{const g=d.value.poi_details[j],y=d.value.poi_details[j+1],f=(l.mode||"").toString();let w="driving";return(f.includes("å…¬äº¤")||f.includes("åœ°é“")||f.includes("Transit"))&&(w="transit"),f.includes("æ­¥è¡Œ")&&(w="walking"),f.includes("éª‘è¡Œ")&&(w="cycling"),{type:w,origin:{name:g.name,lat:g.lat,lng:g.lng,address:g.address,city:u},destination:{name:y.name,lat:y.lat,lng:y.lng,address:y.address,city:u},distance_km:parseFloat(l.distance_km),duration_minutes:parseFloat(l.duration_m)}})}]};try{await q(e),x.showToast("è¡Œç¨‹å·²ä¿å­˜"),setTimeout(()=>h.push({name:"plans"}),1e3)}catch(l){x.showToast("ä¿å­˜å¤±è´¥: "+l.message,"error")}}return(u,e)=>(r(),m("div",Z,[e[20]||(e[20]=t("div",{class:"text-center mb-10 animate-fade-in"},[t("h1",{class:"text-4xl font-bold t-heading mb-3"},"è§„åˆ’æ‚¨çš„å®Œç¾æ—…ç¨‹"),t("p",{class:"t-text-sub text-lg"},"æ™ºèƒ½ä¼˜åŒ–è·¯çº¿ï¼Œè®©æ¯ä¸€æ¬¡å‡ºè¡Œéƒ½è½»æ¾æ„‰æ‚¦")],-1)),t("div",tt,[t("div",et,[t("div",st,[t("div",lt,[e[5]||(e[5]=t("label",{class:"block text-xs font-bold t-text-muted uppercase tracking-wider mb-2"},"å‡ºå‘åŸå¸‚",-1)),t("div",at,[e[4]||(e[4]=t("i",{class:"fas fa-city absolute left-4 top-1/2 -translate-y-1/2 t-text-muted group-focus-within:text-cyan-500 transition-colors"},null,-1)),k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),type:"text",placeholder:"ä¾‹å¦‚ï¼šå¹¿å·",class:"w-full pl-11 pr-4 py-3.5 rounded-xl border outline-none transition-all duration-300 font-medium"},null,512),[[S,p.value]])])]),t("div",ot,[e[7]||(e[7]=t("label",{class:"block text-xs font-bold t-text-muted uppercase tracking-wider mb-2"},[$("æ¸¸ç©åœ°ç‚¹ "),t("span",{class:"t-text-muted font-normal normal-case ml-1"},"(ä¸€è¡Œä¸€ä¸ª)")],-1)),t("div",nt,[e[6]||(e[6]=t("i",{class:"fas fa-map-pin absolute left-4 top-5 t-text-muted group-focus-within:text-cyan-500 transition-colors"},null,-1)),k(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>v.value=l),rows:"6",placeholder:`å¹¿å·å¡”
ç™½äº‘å±±
é•¿éš†é‡ç”ŸåŠ¨ç‰©ä¸–ç•Œ`,class:"w-full pl-11 pr-4 py-3.5 rounded-xl border outline-none transition-all duration-300 font-medium resize-none"},null,512),[[S,v.value]])])]),t("div",rt,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-xs font-bold t-text-muted uppercase tracking-wider mb-2"},"å‡ºè¡Œæ–¹å¼",-1)),t("div",it,[k(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>b.value=l),class:"w-full pl-4 pr-10 py-3 rounded-xl border outline-none transition-all appearance-none cursor-pointer font-medium"},[...e[8]||(e[8]=[t("option",{value:"driving"},"ğŸš— é©¾è½¦å‡ºè¡Œ",-1),t("option",{value:"walking"},"ğŸš¶ æ­¥è¡Œæ¼«æ¸¸",-1),t("option",{value:"transit"},"ğŸšŒ å…¬äº¤åœ°é“",-1)])],512),[[V,b.value]]),e[9]||(e[9]=t("i",{class:"fas fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 t-text-muted pointer-events-none"},null,-1))])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-xs font-bold t-text-muted uppercase tracking-wider mb-2"},"åå¥½è®¾ç½®",-1)),t("div",dt,[k(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value=l),class:"w-full pl-4 pr-10 py-3 rounded-xl border outline-none transition-all appearance-none cursor-pointer font-medium"},[...e[11]||(e[11]=[t("option",{value:"time"},"âš¡ æ—¶é—´æœ€çŸ­",-1),t("option",{value:"distance"},"ğŸ“ è·ç¦»æœ€çŸ­",-1),t("option",{value:"avoid_highway"},"ğŸ›£ï¸ ä¸èµ°é«˜é€Ÿ",-1)])],512),[[V,s.value]]),e[12]||(e[12]=t("i",{class:"fas fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 t-text-muted pointer-events-none"},null,-1))])])]),t("button",{onClick:T,disabled:o.value,class:"w-full bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white font-bold py-4 px-6 rounded-xl shadow-lg shadow-cyan-500/30 transform hover:-translate-y-0.5 active:translate-y-0 transition-all duration-200 flex justify-center items-center gap-3 group disabled:opacity-50"},[t("span",mt,n(o.value?"è§„åˆ’ä¸­...":"å¼€å§‹æ™ºèƒ½è§„åˆ’"),1),t("i",{class:C(["fas",o.value?"fa-spinner fa-spin":"fa-wand-magic-sparkles group-hover:rotate-12 transition-transform duration-300"])},null,2)],8,ut)])]),t("div",ct,[o.value?(r(),m("div",pt,[...e[14]||(e[14]=[t("i",{class:"fas fa-compass fa-spin text-5xl text-primary mb-4"},null,-1),t("p",{class:"text-xl t-text-sub"},"æ­£åœ¨ä¸ºæ‚¨è§„åˆ’æœ€ä½³è·¯çº¿...",-1),t("p",{class:"text-sm t-text-muted mt-2"},"æ­£åœ¨è®¡ç®—è·ç¦»å’Œæ—¶é—´",-1)])])):a.value?(r(),m("div",xt,[e[15]||(e[15]=t("i",{class:"fas fa-exclamation-circle text-5xl mb-4"},null,-1)),e[16]||(e[16]=t("p",{class:"text-xl"},"è§„åˆ’å‡ºé”™",-1)),t("p",vt,n(a.value),1)])):d.value?(r(),N(Y,{key:2,data:d.value,onSave:D},null,8,["data"])):(r(),m("div",ft,[...e[17]||(e[17]=[t("div",{class:"w-32 h-32 rounded-full flex items-center justify-center mb-6 shadow-inner",style:{background:"var(--bg-inset)"}},[t("i",{class:"fas fa-map-location-dot text-6xl t-text-muted"})],-1),t("h3",{class:"text-xl font-bold t-text-sub mb-2"},"ç­‰å¾…è§„åˆ’",-1),t("p",{class:"t-text-muted max-w-xs mx-auto"},"åœ¨å·¦ä¾§è¾“å…¥æ‚¨æƒ³å»çš„åœ°ç‚¹ï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨ç”Ÿæˆæœ€ä½³æ¸¸ç©è·¯çº¿ã€‚",-1)])])),e[18]||(e[18]=t("div",{class:"absolute -top-24 -right-24 w-64 h-64 bg-cyan-400/10 rounded-full blur-3xl pointer-events-none"},null,-1)),e[19]||(e[19]=t("div",{class:"absolute -bottom-24 -left-24 w-64 h-64 bg-blue-400/10 rounded-full blur-3xl pointer-events-none"},null,-1))])])]))}};export{wt as default};
